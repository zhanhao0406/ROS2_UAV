## 正式前检查

ROS version check :  `echo $ROS_DISTRO  # 我的是 jazzy`  
Ubuntu version check : `lsb_release -a  # 我的是 ubuntu 24.04.3 LST, noble`   
Gazebo version check : `gz sim --version  # 我的是 8.10.0，能有输出，说明不是旧版gazebo classic`   

---
工作空间分类  
`mkdir -p ~/ws_xtd2/src`  
`sudo rosdepc init`  
`rosdepc update`  
`cd ..`  
`rosdepc install -i --from-path src --rosdistro jazzy -y`  
`sudo apt install python3-colcon-ros`   
`colcon build`    
然后设置环境变量  
`source install/local_setup.sh # 仅在当前终端生效，每次都要使用`   
<mark> 或者 </mark>   
`echo " source ~/dev_ws/install/local_setup.sh" >> ~/.bashrc # 所有终端均生效，需要打开bashrc文件，添加source 路径`   

---
根据XTD2教程，使用venv虚拟环境  
`sudo apt install python3-venv`  
`python3 -m venv ~/xtd2_pyenv  # 若需要改变环境的位置请自行修改，默认为home目录（~/）`    
`source ~/xtd2_pyenv/bin/activate # 在每次启动终端时，都激活 pyenv 虚拟环境 `   
`#解除激活   deactivate`  
为了省事，可以把source部分写进 ~/.bashrc 中   
`echo "source ~/xtd2_pyenv/bin/activate" >> ~/.bashrc # 但是我没有做，选择手动弄,可能会有混乱`   

---
Gazebo Harmonic安装好后；  
可以从PX4添加自定义模型，将模型文件放入 ~/.simulation-gazebo 中的 models 或者 worlds 文件夹中；  
```bash
cd ~/ws_xtd2
mkdir resources && cd resources
# 下载模型，网络问题无法git的话，直接到官网下载zip，然后 unzip 解压。
git clone https://github.com/PX4/PX4-gazebo-models.git
# 名字不一致就改文件夹名
cd PX4-gazebo-models
python3 simulation-gazebo
```
python3之后开始下载，18M下载完成后自动开始gazebo然后报错。怀疑是没装PX4导致，暂时忽略。
且执行检查环境变量 `echo $GZ_SIM_RESOURCE_PATH`，输出为空；  
GPT建议我环境变量写进bashrc   
```bash
echo 'export GZ_SIM_RESOURCE_PATH=$GZ_SIM_RESOURCE_PATH:$HOME/ws_xtd2/resources/PX4-gazebo-models' >> ~/.bashrc
source ~/.bashrc

```

---
PX4的安装与配置 （1.15.3）
激活 pyenv 虚拟环境，安装 python 依赖库  
<mark> 先看GPT的回复。建议不要用虚拟环境？？？ </mark>
```bash
source ~/xtd2_pyenv/bin/activate
pip3 install kconfiglib jinja2 pyyaml jsonschema empy==3.3.4 pyros-genmsg future catkin_pkg lark 
```



